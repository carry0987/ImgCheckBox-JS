!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).ImgCheckBox=t()}(this,(function(){"use strict";const e={getElem:(e,t,i)=>"object"==typeof e?e:void 0===t&&void 0===i?isNaN(1*e)?document.querySelector(e):document.getElementById(e):"all"===t||null===t?void 0===i?document.querySelectorAll(e):i.querySelectorAll(e):"object"==typeof t&&void 0===i?t.querySelector(e):void 0,isObject:e=>e&&"object"==typeof e&&!Array.isArray(e),deepMerge(t,...i){const o=i.shift();if(!o)return t;if(e.isObject(t)&&e.isObject(o))for(const i in o)e.isObject(o[i])?(t[i]||Object.assign(t,{[i]:{}}),e.deepMerge(t[i],o[i])):Object.assign(t,{[i]:o[i]});return e.deepMerge(t,...i)},injectStylesheet(t,i){let o=document.createElement("style");o.id="imgCheckbox-style"+i,o.appendChild(document.createTextNode("")),document.head.appendChild(o);let n=document.styleSheets[document.styleSheets.length-1];for(let o in t)t.hasOwnProperty(o)&&e.compatInsertRule(n,o,e.buildRules(t[o]),i)},buildRules(e){let t="";for(let[i,o]of Object.entries(e))t+=`${i}:${o};`;return t},compatInsertRule(e,t,i,o){let n=t.replace(".imgCheckbox",".imgCheckbox"+o);e.insertRule(n+"{"+i+"}",0)},removeStylesheet(t){let i=e.getElem("#imgCheckbox-style"+t);i&&i.parentNode.removeChild(i)},isEmpty:e=>!e?.length,changeSelection(t,i,o,n,s,l,c){const{CHECK_MARK:a,CHK_DESELECT:r,CHK_TOGGLE:d,CHK_SELECT:h}=c,g=t.classList.contains(a);n&&i!==r?(l.forEach((e=>e!==t&&e.classList.remove(a))),s?t.classList.toggle(a):t.classList.add(a)):i===r&&t.classList.remove(a)||i===d&&t.classList.toggle(a)||i===h&&t.classList.add(a);const m=t.classList.contains(a);if(g!==m){const e=new CustomEvent("change",{detail:{isSelected:m}});t.dispatchEvent(e)}return o&&e.updateFormValues(n?l:t,a),m},updateFormValues(t,i){(t instanceof Array?t:[t]).forEach((function(t){e.getElem("."+t.dataset.hiddenElementId,"all").forEach((function(e){"input"===e.tagName.toLowerCase()&&(e.checked=!!t.classList.contains(i),e.checked?e.setAttribute("checked","checked"):e.removeAttribute("checked"))}))}))},buildStyles(e,t,i,o){let n={};const s=(e,i,o=!1)=>{let s=e.startsWith("::")?"":" ";e||(s="."+t),n[`span.imgCheckbox${o?"."+t:""}${s}${e}`]=i};if("object"==typeof i&&"object"==typeof o)s(e,i),s(e,o,!0);else for(let[e,t]of Object.entries(i))s(e,t,!!e);return n}};let t=function(e){throw new Error(e)},i=function(e,t=!1){!0===t?console.log("Data Type : "+typeof e,"\nValue : "+e):"boolean"!=typeof t?console.log(t):console.log(e)};class o{constructor(e,t={}){this.init(e,t),o.instance.push(this),1===o.instance.length&&i(`ImgCheckBox is loaded, version: ${o.version}`)}static CHK_TOGGLE=0;static CHK_SELECT=1;static CHK_DESELECT=2;static CHECK_MARK="imgChked";static CHECKMARK_POSITION={"top-left":{top:"0.5%",left:"0.5%"},top:{top:"0.5%",left:0,right:0,margin:"auto"},"top-right":{top:"0.5%",right:"0.5%"},left:{left:"0.5%",bottom:0,top:0,margin:"auto"},right:{right:"0.5%",bottom:0,top:0,margin:"auto"},"bottom-left":{bottom:"0.5%",left:"0.5%"},bottom:{bottom:"0.5%",left:0,right:0,margin:"auto"},"bottom-right":{bottom:"0.5%",right:"0.5%"},center:{top:"0.5%",bottom:"0.5%",left:"0.5%",right:"0.5%",margin:"auto"}};static defaults={checkMarkImage:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAtMzQ2LjM4NCkiPjxwYXRoIGZpbGw9IiMxZWM4MWUiIGZpbGwtb3BhY2l0eT0iLjgiIGQ9Ik0zMiAzNDYuNGEzMiAzMiAwIDAgMC0zMiAzMiAzMiAzMiAwIDAgMCAzMiAzMiAzMiAzMiAwIDAgMCAzMi0zMiAzMiAzMiAwIDAgMC0zMi0zMnptMjEuMyAxMC4zbC0yNC41IDQxTDkuNSAzNzVsMTcuNyA5LjYgMjYtMjh6Ii8+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTkuNSAzNzUuMmwxOS4zIDIyLjQgMjQuNS00MS0yNiAyOC4yeiIvPjwvZz48L3N2Zz4=",enableShiftClick:!0,graySelected:!0,scaleSelected:!0,fixedImageSize:!1,checkMark:"imgChked",checkMarkSize:"30px",checkMarkPosition:"top-left",scaleCheckMark:!0,fadeCheckMark:!1,addToForm:!0,preselect:[],radio:!1,canDeselect:!1,styles:{},onLoad:!1,onClick:!1,onSelect:null,onDeselect:null,debugMessages:!1};static defaultStyles={"span.imgCheckbox":{"user-select":"none","-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none",position:"relative",padding:"0",margin:"2px",display:"inline-block",border:"1px solid transparent","transition-duration":"300ms"},"span.imgCheckbox img":{display:"block",margin:"0",padding:"0","transition-duration":"300ms"},"span.imgCheckbox::before":{display:"block","background-size":"100% 100%",content:"''",color:"white","font-weight":"bold","border-radius":"50%",position:"absolute",margin:"0.5%","z-index":"1","text-align":"center","transition-duration":"300ms"}};init(i,n){let s=e.getElem(i,"all");s&&0!==s.length||t("Element not found"),n||t("Option not found"),o.CHECK_MARK=n.checkMark||o.CHECK_MARK,this.element=s,this.targetElement=i,this.options=e.deepMerge({},o.defaults,n),this.options?.onLoad&&this.options.onLoad(),this.imgCheckboxClass(o.instance.length)}imgCheckboxClass(t){let n,s=this.element,l=this.options,c=[],a={},r=e.buildStyles("img",o.CHECK_MARK,{transform:"scale(1)",filter:"none","-webkit-filter":"grayscale(0)"},{filter:"grayscale(1)","-webkit-filter":"grayscale(1)"}),d=e.buildStyles("img",o.CHECK_MARK,{transform:"scale(1)"},{transform:"scale(0.9)"}),h=e.buildStyles("::before",o.CHECK_MARK,{transform:"scale(0)"},{transform:"scale(1)"}),g=e.buildStyles("::before",o.CHECK_MARK,{opacity:"0"},{opacity:"1"});!1!==l.checkMarkImage&&e.deepMerge(a,{"span.imgCheckbox::before":{"background-image":"url('"+l.checkMarkImage+"')"}});let m=l.checkMarkSize.split(" ");if(e.deepMerge(a,{"span.imgCheckbox::before":{width:m[0],height:m[m.length-1]}}),e.deepMerge(a,{"span.imgCheckbox::before":o.CHECKMARK_POSITION[l.checkMarkPosition]}),l.fixedImageSize){let t=l.fixedImageSize.split(" ");e.deepMerge(a,{"span.imgCheckbox img":{width:t[0],height:t[t.length-1]}})}[{doExtension:l.graySelected,style:r},{doExtension:l.scaleSelected,style:d},{doExtension:l.scaleCheckMark,style:h},{doExtension:l.fadeCheckMark,style:g}].forEach((function(t){t.doExtension&&e.deepMerge(a,t.style)})),e.deepMerge(o.defaultStyles,e.buildStyles("",o.CHECK_MARK,{"":{"border-color":"#ccc"},img:{},"::before":{}})),a=e.deepMerge({},o.defaultStyles,a,l.styles),e.injectStylesheet(a,t);for(let n=0;n<s.length;n++){let a=s[n];if(a.parentNode.classList.contains("imgCheckbox"+t))continue;if("img"!==a.tagName.toLowerCase())continue;if(0===a.offsetWidth&&0===a.offsetHeight)continue;a.ondragstart=()=>!1;let r=document.createElement("span");if(r.className="imgCheckbox"+t,a.parentNode.insertBefore(r,a),r.appendChild(a),c.push(r),r.imgChkDeselect=()=>{e.changeSelection(r,o.CHK_DESELECT,l.addToForm,l.radio,l.canDeselect,c,o.constants),l.onDeselect?.(r)},r.imgChkSelect=()=>{e.changeSelection(r,o.CHK_SELECT,l.addToForm,l.radio,l.canDeselect,c,o.constants),l.onSelect?.(r)},r.firstChild.imgChkDeselect=()=>{e.changeSelection(r,o.CHK_DESELECT,l.addToForm,l.radio,l.canDeselect,c,o.constants),l.onDeselect?.(r)},r.firstChild.imgChkSelect=()=>{e.changeSelection(r,o.CHK_SELECT,l.addToForm,l.radio,l.canDeselect,c,o.constants),l.onSelect?.(r)},l.addToForm instanceof Element||!0===l.addToForm){if(!0===l.addToForm){let e=a.closest("form");l.addToForm=e||!1}if(l.addToForm?.length&&0===l.addToForm.length&&(l.debugMessages&&i("imgCheckbox: no form found (looks for form by default)"),l.addToForm=!1),l.addToForm){let e="hEI"+t+"-"+n;a.parentNode.dataset.hiddenElementId=e;let i=a.getAttribute("name");i=i||a.src.match(/\/(.*)\.[\w]+$/)[1];let s=document.createElement("input");s.setAttribute("type","checkbox"),s.setAttribute("name",i),s.className=e,s.style.display="none",s.checked=a.parentNode.classList.contains(o.CHECK_MARK),l.addToForm.appendChild(s)}}}return(!0===l.preselect||l.preselect.length>0)&&c.forEach(((e,t)=>{(!0===l.preselect||l.preselect.indexOf(t)>=0)&&e.classList.add(o.CHECK_MARK)})),c.forEach((t=>{t.addEventListener("click",(i=>{if(l.enableShiftClick&&!l.radio&&i.shiftKey&&n){let e=c.indexOf(n),i=c.indexOf(t);e>i&&([e,i]=[i,e]);for(let t=e;t<=i;t++)c[t].classList.contains(o.CHECK_MARK)||(c[t].imgChkSelect(),l.onClick&&l.onClick(c[t],!0),l.onChange&&l.onChange(c[t],!0))}else{const i=e.changeSelection(t,o.CHK_TOGGLE,l.addToForm,l.radio,l.canDeselect,c,o.constants);l.onClick&&l.onClick(t,i),i?l.onSelect?.(t):l.onDeselect?.(t)}n=t})),t.addEventListener("change",(e=>{l.onChange&&l.onChange(t,e.detail.isSelected)}))})),this}target(e){return e>=0&&e<this.element.length?(this.targetIndex=e,this):t("The given index is out of range.")}state(){return!!e.getElem(this.element[this.targetIndex]).parentNode.classList.contains(o.CHECK_MARK)}select(e){if(e<0||e>=this.element.length)return t("The given index is out of range.");this.element[e].imgChkSelect&&this.element[e].imgChkSelect()}deselect(e){if(e<0||e>=this.element.length)return t("The given index is out of range.");this.element[e].imgChkDeselect&&this.element[e].imgChkDeselect()}selectAll(){for(let e=0;e<this.element.length;e++)this.element[e].imgChkSelect&&this.element[e].imgChkSelect()}deselectAll(){for(let e=0;e<this.element.length;e++)this.element[e].imgChkDeselect&&this.element[e].imgChkDeselect()}destroy(){let i=this.element,n=o.instance.indexOf(this);if(n<0)return t("ImgCheckBox instance not found");e.removeStylesheet(n);for(let e=0;e<i.length;e++){let t=i[e];if(t.parentNode.classList.contains("imgCheckbox"+n)){let e=t.parentNode;e.parentNode?.insertBefore(t,e),e.parentNode?.removeChild(e)}}o.instance.splice(n,1)}static get constants(){return{CHECK_MARK:o.CHECK_MARK,CHK_DESELECT:o.CHK_DESELECT,CHK_TOGGLE:o.CHK_TOGGLE,CHK_SELECT:o.CHK_SELECT}}static get length(){return this.element.length}}return o.version="1.0.0",o.instance=[],o}));
