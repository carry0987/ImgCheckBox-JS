!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).ImgCheckBox=t()}(this,(function(){"use strict";class e{constructor(e){Object.assign(this,e)}static version="2.0.2";static stylesheetId="utils-style";static replaceRule={from:".utils",to:".utils-"};static setStylesheetId(t){e.stylesheetId=t}static setReplaceRule(t,i){e.replaceRule.from=t,e.replaceRule.to=i}static getElem(e,t,i){return"object"==typeof e?e:void 0===t&&void 0===i?isNaN(Number(e))?document.querySelector(e):document.getElementById(e):"all"===t||null===t?void 0===i?document.querySelectorAll(e):i.querySelectorAll(e):"object"==typeof t&&void 0===i?t.querySelector(e):null}static createElem(e,t={},i=""){let s=document.createElement(e);for(let e in t)t.hasOwnProperty(e)&&("innerText"===e?s.textContent=t[e]:s.setAttribute(e,t[e]));return i&&s.append(document.createTextNode(i)),s}static insertAfter(t,i){if("string"==typeof i){let t=e.createElem("div");t.innerHTML=i,i=t.firstChild}t.nextSibling?t.parentNode.insertBefore(i,t.nextSibling):t.parentNode.appendChild(i)}static insertBefore(t,i){if("string"==typeof i){let t=e.createElem("div");t.innerHTML=i,i=t.firstChild}t.parentNode.insertBefore(i,t)}static addClass(e,t){return e.classList.add(t),e}static removeClass(e,t){return e.classList.remove(t),e}static toggleClass(e,t){return e.classList.toggle(t),e}static hasClass(e,t){return e.classList.contains(t)}static isObject(e){return e&&"object"==typeof e&&!Array.isArray(e)}static deepMerge(t,...i){const s=i.shift();if(!s)return t;if(e.isObject(t)&&e.isObject(s))for(const i in s)e.isObject(s[i])?(t[i]||Object.assign(t,{[i]:{}}),e.deepMerge(t[i],s[i])):Object.assign(t,{[i]:s[i]});return e.deepMerge(t,...i)}static injectStylesheet(t,i=null){i=e.isEmpty(i)?"":i;let s=e.createElem("style");s.id=e.stylesheetId+i,s.textContent="",document.head.append(s);let n=s.sheet;for(let s in t)t.hasOwnProperty(s)&&e.compatInsertRule(n,s,e.buildRules(t[s]),i)}static buildRules(e){let t="";for(let[i,s]of Object.entries(e))i=i.replace(/([A-Z])/g,(e=>`-${e[0].toLowerCase()}`)),t+=`${i}:${s};`;return t}static compatInsertRule(t,i,s,n=null){n=e.isEmpty(n)?"":n;let o=i.replace(e.replaceRule.from,e.replaceRule.to+n);t.insertRule(o+"{"+s+"}",0)}static removeStylesheet(t=null){t=e.isEmpty(t)?"":t;let i=e.getElem("#"+e.stylesheetId+t);i&&i.parentNode.removeChild(i)}static isEmpty(e){return"number"!=typeof e&&!e?.length}static createEvent(e,t=null){return new CustomEvent(e,{detail:t})}static dispatchEvent(t,i=null){document.dispatchEvent(e.createEvent(t,i))}static generateRandom(e=8){return Math.random().toString(36).substring(2,2+e)}}Object.defineProperty(e,"version",{writable:!1,configurable:!0}),e.setStylesheetId="imgCheckbox-style",e.setReplaceRule(".imgCheckbox",".imgCheckbox"),e.changeSelection=function(t,i,s,n,o,l,a){const{CHECK_MARK:c,CHK_DESELECT:r,CHK_TOGGLE:d,CHK_SELECT:h}=a,g=t.classList.contains(c);n&&i!==r?(l.forEach((e=>e!==t&&e.classList.remove(c))),o?t.classList.toggle(c):t.classList.add(c)):i===r&&t.classList.remove(c)||i===d&&t.classList.toggle(c)||i===h&&t.classList.add(c);const m=t.classList.contains(c);if(g!==m){const e=new CustomEvent("change",{detail:{isSelected:m}});t.dispatchEvent(e)}return s&&e.updateFormValues(n?l:t,c),m},e.updateFormValues=function(t,i){(t instanceof Array?t:[t]).forEach((function(t){e.getElem("."+t.dataset.hiddenElementId,"all").forEach((function(e){"input"===e.tagName.toLowerCase()&&(e.checked=!!t.classList.contains(i),e.checked?e.setAttribute("checked","checked"):e.removeAttribute("checked"))}))}))},e.buildStyles=function(e,t,i,s){let n={};const o=(e,i,s=!1)=>{let o=e.startsWith("::")?"":" ";e||(o="."+t),n[`span.imgCheckbox${s?"."+t:""}${o}${e}`]=i};if("object"==typeof i&&"object"==typeof s)o(e,i),o(e,s,!0);else for(let[e,t]of Object.entries(i))o(e,t,!!e);return n};let t=function(e){throw new Error(e)},i=function(e,t=!1){!0===t?console.log("Data Type : "+typeof e,"\nValue : "+e):"boolean"!=typeof t?console.log(t):console.log(e)};class s{constructor(e,t={}){this.init(e,t),s.instance.push(this),1===s.instance.length&&i(`ImgCheckBox is loaded, version: ${s.version}`)}static CHK_TOGGLE=0;static CHK_SELECT=1;static CHK_DESELECT=2;static CHECK_MARK="imgChked";static CHECKMARK_POSITION={"top-left":{top:"0.5%",left:"0.5%"},top:{top:"0.5%",left:0,right:0,margin:"auto"},"top-right":{top:"0.5%",right:"0.5%"},left:{left:"0.5%",bottom:0,top:0,margin:"auto"},right:{right:"0.5%",bottom:0,top:0,margin:"auto"},"bottom-left":{bottom:"0.5%",left:"0.5%"},bottom:{bottom:"0.5%",left:0,right:0,margin:"auto"},"bottom-right":{bottom:"0.5%",right:"0.5%"},center:{top:"0.5%",bottom:"0.5%",left:"0.5%",right:"0.5%",margin:"auto"}};static defaults={checkMarkImage:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAtMzQ2LjM4NCkiPjxwYXRoIGZpbGw9IiMxZWM4MWUiIGZpbGwtb3BhY2l0eT0iLjgiIGQ9Ik0zMiAzNDYuNGEzMiAzMiAwIDAgMC0zMiAzMiAzMiAzMiAwIDAgMCAzMiAzMiAzMiAzMiAwIDAgMCAzMi0zMiAzMiAzMiAwIDAgMC0zMi0zMnptMjEuMyAxMC4zbC0yNC41IDQxTDkuNSAzNzVsMTcuNyA5LjYgMjYtMjh6Ii8+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTkuNSAzNzUuMmwxOS4zIDIyLjQgMjQuNS00MS0yNiAyOC4yeiIvPjwvZz48L3N2Zz4=",enableShiftClick:!0,graySelected:!0,scaleSelected:!0,fixedImageSize:!1,checkMark:"imgChked",checkMarkSize:"30px",checkMarkPosition:"top-left",scaleCheckMark:!0,fadeCheckMark:!1,addToForm:!0,preselect:[],radio:!1,canDeselect:!1,styles:{},onLoad:!1,onClick:!1,onSelect:null,onDeselect:null,debugMessages:!1};static defaultStyles={"span.imgCheckbox":{"user-select":"none","-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none",position:"relative",padding:"0",margin:"2px",display:"inline-block",border:"1px solid transparent","transition-duration":"300ms"},"span.imgCheckbox img":{display:"block",margin:"0",padding:"0","transition-duration":"300ms"},"span.imgCheckbox::before":{display:"block","background-size":"100% 100%",content:"''",color:"white","font-weight":"bold","border-radius":"50%",position:"absolute",margin:"0.5%","z-index":"1","text-align":"center","transition-duration":"300ms"}};init(i,n){let o=e.getElem(i,"all");o&&0!==o.length||t("Element not found"),n||t("Option not found"),s.CHECK_MARK=n.checkMark||s.CHECK_MARK,this.element=o,this.targetElement=i,this.options=e.deepMerge({},s.defaults,n),this.options?.onLoad&&this.options.onLoad(),this.imgCheckboxClass(s.instance.length)}imgCheckboxClass(t){let n,o=this.element,l=this.options,a=[],c={},r=e.buildStyles("img",s.CHECK_MARK,{transform:"scale(1)",filter:"none","-webkit-filter":"grayscale(0)"},{filter:"grayscale(1)","-webkit-filter":"grayscale(1)"}),d=e.buildStyles("img",s.CHECK_MARK,{transform:"scale(1)"},{transform:"scale(0.9)"}),h=e.buildStyles("::before",s.CHECK_MARK,{transform:"scale(0)"},{transform:"scale(1)"}),g=e.buildStyles("::before",s.CHECK_MARK,{opacity:"0"},{opacity:"1"});!1!==l.checkMarkImage&&e.deepMerge(c,{"span.imgCheckbox::before":{"background-image":"url('"+l.checkMarkImage+"')"}});let m=l.checkMarkSize.split(" ");if(e.deepMerge(c,{"span.imgCheckbox::before":{width:m[0],height:m[m.length-1]}}),e.deepMerge(c,{"span.imgCheckbox::before":s.CHECKMARK_POSITION[l.checkMarkPosition]}),l.fixedImageSize){let t=l.fixedImageSize.split(" ");e.deepMerge(c,{"span.imgCheckbox img":{width:t[0],height:t[t.length-1]}})}[{doExtension:l.graySelected,style:r},{doExtension:l.scaleSelected,style:d},{doExtension:l.scaleCheckMark,style:h},{doExtension:l.fadeCheckMark,style:g}].forEach((function(t){t.doExtension&&e.deepMerge(c,t.style)})),e.deepMerge(s.defaultStyles,e.buildStyles("",s.CHECK_MARK,{"":{"border-color":"#ccc"},img:{},"::before":{}})),c=e.deepMerge({},s.defaultStyles,c,l.styles),e.injectStylesheet(c,t);for(let n=0;n<o.length;n++){let c=o[n];if(c.parentNode.classList.contains("imgCheckbox"+t))continue;if("img"!==c.tagName.toLowerCase())continue;if(0===c.offsetWidth&&0===c.offsetHeight)continue;c.ondragstart=()=>!1;let r=document.createElement("span");if(r.className="imgCheckbox"+t,c.parentNode.insertBefore(r,c),r.appendChild(c),a.push(r),r.imgChkDeselect=()=>{e.changeSelection(r,s.CHK_DESELECT,l.addToForm,l.radio,l.canDeselect,a,s.constants),l.onDeselect?.(r)},r.imgChkSelect=()=>{e.changeSelection(r,s.CHK_SELECT,l.addToForm,l.radio,l.canDeselect,a,s.constants),l.onSelect?.(r)},r.firstChild.imgChkDeselect=()=>{e.changeSelection(r,s.CHK_DESELECT,l.addToForm,l.radio,l.canDeselect,a,s.constants),l.onDeselect?.(r)},r.firstChild.imgChkSelect=()=>{e.changeSelection(r,s.CHK_SELECT,l.addToForm,l.radio,l.canDeselect,a,s.constants),l.onSelect?.(r)},l.addToForm instanceof Element||!0===l.addToForm){if(!0===l.addToForm){let e=c.closest("form");l.addToForm=e||!1}if(l.addToForm?.length&&0===l.addToForm.length&&(l.debugMessages&&i("imgCheckbox: no form found (looks for form by default)"),l.addToForm=!1),l.addToForm){let e="hEI"+t+"-"+n;c.parentNode.dataset.hiddenElementId=e;let i=c.getAttribute("name");i=i||c.src.match(/\/(.*)\.[\w]+$/)[1];let o=document.createElement("input");o.setAttribute("type","checkbox"),o.setAttribute("name",i),o.className=e,o.style.display="none",o.checked=c.parentNode.classList.contains(s.CHECK_MARK),l.addToForm.appendChild(o)}}}return(!0===l.preselect||l.preselect.length>0)&&a.forEach(((e,t)=>{(!0===l.preselect||l.preselect.indexOf(t)>=0)&&e.classList.add(s.CHECK_MARK)})),a.forEach((t=>{t.addEventListener("click",(i=>{if(l.enableShiftClick&&!l.radio&&i.shiftKey&&n){let e=a.indexOf(n),i=a.indexOf(t);e>i&&([e,i]=[i,e]);for(let t=e;t<=i;t++)a[t].classList.contains(s.CHECK_MARK)||(a[t].imgChkSelect(),l.onClick&&l.onClick(a[t],!0),l.onChange&&l.onChange(a[t],!0))}else{const i=e.changeSelection(t,s.CHK_TOGGLE,l.addToForm,l.radio,l.canDeselect,a,s.constants);l.onClick&&l.onClick(t,i),i?l.onSelect?.(t):l.onDeselect?.(t)}n=t})),t.addEventListener("change",(e=>{l.onChange&&l.onChange(t,e.detail.isSelected)}))})),this}target(e){return e>=0&&e<this.element.length?(this.targetIndex=e,this):t("The given index is out of range.")}state(){return!!e.getElem(this.element[this.targetIndex]).parentNode.classList.contains(s.CHECK_MARK)}select(e){if(e<0||e>=this.element.length)return t("The given index is out of range.");this.element[e].imgChkSelect&&this.element[e].imgChkSelect()}deselect(e){if(e<0||e>=this.element.length)return t("The given index is out of range.");this.element[e].imgChkDeselect&&this.element[e].imgChkDeselect()}selectAll(){for(let e=0;e<this.element.length;e++)this.element[e].imgChkSelect&&this.element[e].imgChkSelect()}deselectAll(){for(let e=0;e<this.element.length;e++)this.element[e].imgChkDeselect&&this.element[e].imgChkDeselect()}destroy(){let i=this.element,n=s.instance.indexOf(this);if(n<0)return t("ImgCheckBox instance not found");e.removeStylesheet(n);for(let e=0;e<i.length;e++){let t=i[e];if(t.parentNode.classList.contains("imgCheckbox"+n)){let e=t.parentNode;e.parentNode?.insertBefore(t,e),e.parentNode?.removeChild(e)}}s.instance.splice(n,1)}static get constants(){return{CHECK_MARK:s.CHECK_MARK,CHK_DESELECT:s.CHK_DESELECT,CHK_TOGGLE:s.CHK_TOGGLE,CHK_SELECT:s.CHK_SELECT}}static get length(){return this.element.length}}return s.version="1.0.3",s.instance=[],s}));
